name: Daily Issue Open

on:
  schedule:
    # ë§¤ì¼ 21ì‹œ(UTC)ì— ì‹¤í–‰ (í•œêµ­ì‹œê°„ ë‹¤ìŒë‚  ì˜¤ì „ 6ì‹œ)
    - cron: '0 21 * * *'
  workflow_dispatch:  # ìˆ˜ë™ íŠ¸ë¦¬ê±° ì˜µì…˜

jobs:
  open-daily-issue:
    runs-on: ubuntu-latest
    permissions:
      issues: write
      contents: read

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Get today's date (KST)
        id: date
        run: echo "today=$(TZ=Asia/Seoul date +'%Y-%m-%d')" >> $GITHUB_OUTPUT

      - name: Create daily issue
        uses: actions/github-script@v6
        with:
          script: |
            const today = '${{ steps.date.outputs.today }}';
            const title = `ğŸ“ Daily TIL - ${today}`;
            const body = [
              `## ğŸ“… Today's Learning`,
              ``,
              `Date: ${today}`,
              ``,
              `### âœï¸ What I learned today:`,
              `- [ ] í•™ìŠµ ë‚´ìš© 1`,
              `- [ ] í•™ìŠµ ë‚´ìš© 2`,
              `- [ ] í•™ìŠµ ë‚´ìš© 3`,
              ``,
              `### ğŸ“š Resources:`,
              `- ìë£Œ ë§í¬ 1`,
              `- ìë£Œ ë§í¬ 2`,
              ``,
              `### ğŸ¯ Tomorrow's Goal:`,
              `- ë‚´ì¼ ê³µë¶€í•  ë‚´ìš© ì‘ì„±`,
              ``,
              `### ğŸ’¡ Notes:`,
              `ììœ ë¡­ê²Œ ë©”ëª¨ ì‘ì„±`,
              ``,
              `---`,
              `*This issue was automatically created for today's learning log.*`
            ].join('\n');
            
            const issue = await github.rest.issues.create({
              owner: context.repo.owner,
              repo: context.repo.repo,
              title: title,
              body: body,
              labels: ['daily-til', 'auto-generated']
            });
            
            console.log(`âœ… Issue created: ${issue.data.html_url}`);
